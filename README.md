# PNG WIDTH REDUCER
<b>PNG WIDTH REDUCER</b> - программа для "сжатия ширины" png-изображений, используя метод, основанный на динамическом алгоритме поиска минимального маршрута от нижней границы до верхней. <br>

#### Вес точки - как в условии (квадрат евклидового расстояния в RGB-пространстве от точки до ее соседей). При наличии A-альфа канала, он учитывается в вычислении расстояния (все веса умножаются на A)<br>

## <b>Характеристики (функционал):</b><br>
  1. Обрабатываемые входные цветотипы : `Palette-Based, RGB, RGBA`
  2. Входная глубина цвета : любая (все "кастится" к `bit_depth=8`)
  3. Выходные цветотипы : `RGB, RGBA (с альфа-каналом)`
  4. Включение/выключение гамма-коррекции

## <b>Предлагаемые улучшения: (реализованы : 1)</b><br>
  1. Гамма-коррекция: <br>
    - https://habr.com/ru/post/353582/#2 <br>
    - https://www.belstu.by/Portals/0/userfiles/87/KONSPEKT-LEKCIJ.pdf  <br>
  2. Вес вклада каждой компоненты R-G-B - уникальный и зависит от светочувствительности "среднего глаза" <br>
    - http://window.edu.ru/resource/341/65341/files/Zacharov_978-5-94774-906-9/Glava1_cB906-9.pdf <br>

## Структура кода
  1. `/` - исходные `*.c файлы`
  2. `/include` - заголовочные файлы (необходимые структуры и объявления)
  3. `/test_images` - директория с тестовыми фотографиями
	
## Использование
  1. Компиляция `make compile`
  2. Запуск `[GAMMA_CORRECTION=2.4] ./reducer [input.png] [output.png] [percent]`
     - `GAMMA_CORRECTION=2.4` - переменная окружения, которая сигнализирует о необходимости использовать гамма-коррекцию. Значение `2.4` продиктовано тем, что при таком параметре гамма-преобразования спектр-энергии будет линеен (т.е. избавимся от нелинейности при восприятии отличия `[0, 10, 0] от [0, 20, 0]` и `[0, 190, 0] от [0, 200, 0]` (статья на Хабре описывает это). Если данная переменная окружения отсутствует, то гамма-коррекция не производится
     - `reducer` - полный путь до бинарника
     - `input.png` - относительный (или полный) путь до исходного png-файла
     - `output.png` - относительный (или полный) путь до выходного png-файлы
     - `percent` - процент сжатия (т.е. `p % < 100 %` означает, что ширина выходного `output.png` файлы будет `p %` от ширины исходного `input.png`
  3. Тестирование можно провести на изображениях из директории `/test_images`
  
  <b>Пример: </b> `GAMMA_CORRECTION=2.4 ./reducer test_images/rgb8.png reduced_rgb8.png 63`
